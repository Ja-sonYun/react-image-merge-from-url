(this["webpackJsonpreact-image-merge-from-url"]=this["webpackJsonpreact-image-merge-from-url"]||[]).push([[0],{64:function(e,t,n){e.exports=n(96)},69:function(e,t,n){},70:function(e,t,n){},71:function(e,t,n){},76:function(e,t,n){},95:function(e,t,n){},96:function(e,t,n){"use strict";n.r(t);var a=n(0),r=n.n(a),s=n(8),i=n.n(s),o=(n(69),n(58)),c=n(15),l=n(16),u=n(21),p=n(19),g=(n(70),function(e){Object(u.a)(n,e);var t=Object(p.a)(n);function n(){return Object(c.a)(this,n),t.apply(this,arguments)}return Object(l.a)(n,[{key:"render",value:function(){return r.a.createElement("div",{id:"footer"},r.a.createElement("h3",{className:"footer-content"},"By Jasonyun ",r.a.createElement("a",{href:"https://github.com/Ja-sonYun"},"Github")," | ",r.a.createElement("a",{href:"https://abex.dev"},"ABEX")),r.a.createElement("p",{className:"footer-links"},"used ",r.a.createElement("a",{href:"https://allorigins.win/"},"all origin"),"'s api to avoid same-origin policy problems.",r.a.createElement("br",null),"Source Code of this page(github) : ",r.a.createElement("a",{href:"https://github.com/Ja-sonYun/react-image-merge-from-url"},"here")),r.a.createElement("br",null))}}]),n}(r.a.Component)),d=(n(71),function(){return{ko:"\uc5d0\ub7ec! \ub2e4\uc2dc\uc2dc\ub3c4\ud574\uc8fc\uc138\uc694.",jp:"\u30a8\u30e9\uff01",en:"Something wrong!",step:-1}});var h=n(134),f=n(126),m=n(133),v=function(e){Object(u.a)(n,e);var t=Object(p.a)(n);function n(){var e;return Object(c.a)(this,n),(e=t.call(this)).handleChange=function(t){e.props.setLan(t.target.value),e.setState({lan:t.target.value})},e.ToggleLangMenu=function(){e.setState({isOpen:!e.state.isOpen})},e.state={lan:"en",isOpen:!1},e}return Object(l.a)(n,[{key:"render",value:function(){return r.a.createElement("div",null,r.a.createElement("p",{id:"abex"},r.a.createElement("a",{class:"AbutBlack",href:"https://abex.dev"},"abex.dev")),r.a.createElement(f.a,{className:"classes.formControl",id:"lanSelection"},r.a.createElement(m.a,{labelId:"lanSelect-label",id:"lanSelect",open:this.state.isOpen,onClose:this.ToggleLangMenu,onOpen:this.ToggleLangMenu,value:this.state.lan,onChange:this.handleChange},r.a.createElement(h.a,{value:"en"},r.a.createElement("em",null,"en")),r.a.createElement(h.a,{value:"ko"},"ko"),r.a.createElement(h.a,{value:"jp"},"jp"))),r.a.createElement("p",{id:"main"},"Image Merger"),r.a.createElement("p",{id:"description"},{ko:"URL\uc744 \uc785\ub825\ud558\uc2dc\uba74 \ud574\ub2f9 URL\uc5d0 \uc788\ub294 \ubaa8\ub4e0\uc774\ubbf8\uc9c0\ub97c \ub2e4\uc6b4\ub85c\ub4dc\ud558\uc5ec \ud55c\uc7a5\uc758 \uc774\ubbf8\uc9c0\ub85c \ud569\uccd0\uc90d\ub2c8\ub2e4.",jp:"URL\u3092\u5165\u529b\u3059\u308b\u3068\u3001\u305d\u306eURL\u304b\u3089\u5168\u3066\u306e\u30a4\u30e1\u30fc\u30b8\u3092\u30c0\u30a6\u30f3\u30ed\u30fc\u30c9\u3057\u3001\u4e00\u679a\u306e\u30a4\u30e1\u30fc\u30b8\u306b\u5408\u6210\u3057\u307e\u3059\u3002",en:"Just put the url. This website will automatically download all images from given url and merge them as an one image file."}[this.props.lan]))}}]),n}(r.a.Component),b=n(13),w=n.n(b),k=n(32),R=n(33),L=(n(76),n(130)),E=n(131),U=n(132);function j(e){var t=e.onClick,n=e.loading,a=e.lan;return r.a.createElement("div",{id:"buttonSection"},r.a.createElement(L.a,{variant:"outlined",onClick:t},n&&r.a.createElement(E.a,{size:14}),!n&&{ko:"\ud569\uce58\uae30",jp:"Merge",en:"Merge"}[a]))}var O=function(e){Object(u.a)(n,e);var t=Object(p.a)(n);function n(){var e;return Object(c.a)(this,n),(e=t.call(this)).regetStatus=function(){e.state.isValidURL?"t"===e.state.isValidURL[e.state.isValidURL.length-1]&&e.setState({isValidURL:e.state.isValidURL.slice(0,-6)}):e.setState({isValidURL:"clicked"})},e.sendURL=function(t){var n;n=t.target.value,new RegExp("^(https?:\\/\\/)?((([a-z\\d]([a-z\\d-]*[a-z\\d])*)\\.)+[a-z]{2,}|((\\d{1,3}\\.){3}\\d{1,3}))(\\:\\d+)?(\\/[-a-z\\d%_.~+]*)*(\\?[;&a-z\\d%_.~+=-]*)?(\\#[-a-z\\d_]*)?$","i").test(n)?(e.setState({isValidURL:"valid"}),e.props.adrf(t.target.value)):(""===t.target.value?e.setState({isValidURL:""}):e.setState({isValidURL:"invalid"}),e.props.adrf(""))},e.stepToPercentage=function(){return 0===e.props.progress[2]?0:e.props.progress[0]/e.props.progress[2]*100},e.m=function(t){return t[e.props.lan]},e.state={url:"",isValidURL:""},e.wrapperRef=r.a.createRef(),e.setWrapperRef=e.setWrapperRef.bind(Object(R.a)(e)),e.handleClickOutside=e.handleClickOutside.bind(Object(R.a)(e)),e}return Object(l.a)(n,[{key:"componentDidMount",value:function(){document.addEventListener("mousedown",this.handleClickOutside)}},{key:"componentWillUnmount",value:function(){document.removeEventListener("mousedown",this.handleClickOutside)}},{key:"setWrapperRef",value:function(e){this.wrapperRef=e}},{key:"handleClickOutside",value:function(e){if(this.wrapperRef&&!this.wrapperRef.current.contains(e.target)&&"t"!==this.state.isValidURL[this.state.isValidURL.length-1]){var t=this.state.isValidURL?this.state.isValidURL+"-light":"";this.setState({isValidURL:t})}}},{key:"render",value:function(){var e=0===this.props.progress[2]?0:this.props.progress[0]/this.props.progress[2]*100,t=e<100&&e>0;return r.a.createElement("div",null,r.a.createElement("input",{onClick:this.regetStatus,ref:this.wrapperRef,placeholder:this.m({ko:"\uc774\uacf3\uc5d0 url\uc744 \uc785\ub825\ud574 \uc8fc\uc138\uc694...",jp:"URL\u3092\u5165\u529b\u3057\u3066\u304f\u3060\u3055\u3044\u3002",en:"Enter URL here..."}),className:this.state.isValidURL,type:"text",onChange:this.sendURL}),r.a.createElement("br",null),r.a.createElement("div",{id:"progressSection"},r.a.createElement(j,{onClick:this.props.merge,loading:t,lan:this.props.lan}),t&&r.a.createElement(U.a,{variant:"determinate",value:0===this.props.progress[2]?0:e}),r.a.createElement("p",{id:"progressInfo"},this.props.progress[1])))}}]),n}(r.a.Component),y=n(56);function S(e,t){return"url"===t?"https://api.allorigins.win/get?url="+e:"raw"===t?"https://api.allorigins.win/raw?url="+e:void console.error("wrong parameter!")}var C=n(77);function x(e){return e.match(/(?:(?:https?|ftp|file):\/\/|www\.|ftp\.)(?:\([-A-Z0-9+&@#/%=~_|$?!:,.]*\)|[-A-Z0-9+&@#/%=~_|$?!:,.])*\.(jpg|jpeg|png)/gim)}function P(e){return V.apply(this,arguments)}function V(){return(V=Object(k.a)(w.a.mark((function e(t){return w.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,C.get(S(encodeURIComponent(t),"url"));case 3:return e.abrupt("return",e.sent);case 6:e.prev=6,e.t0=e.catch(0),alert(e.t0);case 9:case"end":return e.stop()}}),e,null,[[0,6]])})))).apply(this,arguments)}function I(e){return new Promise((function(t,n){var a=new Image;a.onload=function(){t([this.width,this.height])},a.src=e}))}function M(e){return new Promise((function(t,n){C.get(S(encodeURIComponent(e),"raw"),{responseType:"arraybuffer"}).then((function(e){var n=new Blob([e.data],{type:e.headers["content-type"]}),a=URL.createObjectURL(n);t(a)}))}))}function A(e){var t=0,n=0;return e.forEach((function(e){t+=e[1],n=n<e[0]?e[0]:n})),[n,t]}function W(){return(W=Object(k.a)(w.a.mark((function e(t){var n,a;return w.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,P(t).then((function(e){n=x(e.data.contents)}));case 2:return a=[],n.forEach((function(e){a.indexOf(e)<0&&a.push(e)})),e.abrupt("return",a);case 5:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function B(){return(B=Object(k.a)(w.a.mark((function e(t){var n,a,r,s;return w.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:n=[],a=Object(y.a)(t),e.prev=2,a.s();case 4:if((r=a.n()).done){e.next=10;break}return s=r.value,e.next=8,I(s).then((function(e){n.push(e)}));case 8:e.next=4;break;case 10:e.next=15;break;case 12:e.prev=12,e.t0=e.catch(2),a.e(e.t0);case 15:return e.prev=15,a.f(),e.finish(15);case 18:return e.abrupt("return",n);case 19:case"end":return e.stop()}}),e,null,[[2,12,15,18]])})))).apply(this,arguments)}var N=n(57),T=function(e){Object(u.a)(n,e);var t=Object(p.a)(n);function n(){var e;return Object(c.a)(this,n),(e=t.call(this)).updateProgress=function(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,a=t[e.props.lan];0!==e.state.progress[2]?e.setState({progress:[t.step,a,e.state.progress[2]]}):e.setState({progress:[t.step,a,n]})},e.gotURL=function(t){e.setState({targetURL:t})},e.merge=function(){e.state.targetURL?(e.updateProgress({ko:"url\uc5d0\uc11c \uc774\ubbf8\uc9c0 \ucc3e\ub294\uc911...",jp:"url\u304b\u3089\u30a4\u30e1\u30fc\u30b8\u63a2\u7d22\u4e2d...",en:"Finding images from given url...",step:1}),function(e){return W.apply(this,arguments)}(e.state.targetURL).then((function(t){var n;null!=t?(e.setState({imageURLs:t}),e.updateProgress({ko:(n=t.length)+"\uac1c\uc758 \uc774\ubbf8\uc9c0 \ubc1c\uacac. \uba54\ud0c0\ub370\uc774\ud130 \uc218\uc9d1\uc911...",jp:n+" \u30a4\u30e1\u30fc\u30b8\u767a\u898b\u3002\u30e1\u30bf\u30c7\u30fc\u30bf\u53d6\u96c6\u4e2d...",en:n+" images found. Start to get metadatas...",step:2},t.length+6),function(e){return B.apply(this,arguments)}(e.state.imageURLs).then((function(t){e.setState({imagesMeta:t}),e.fetchImages().then((function(t){e.updateProgress(function(e){return{ko:"\uc644\ub8cc! \uc774\ubbf8\uc9c0 \ud569\uce58\ub294\uc911...",jp:"\u6210\u529f\uff01\u30a4\u30e1\u30fc\u30b8\u5408\u6210\u4e2d...",en:"Done! Starting merge...",step:4+e}}(e.state.imageURLs.length)),Object(N.a)(t).then((function(t){var n=document.createElement("a");e.updateProgress(function(e){return{ko:"\uc644\ub8cc!",jp:"\u6210\u529f\uff01",en:"All done!",step:6+e}}(e.state.imageURLs.length)),n.innerHTML="download image",n.href=t,n.download="merged-image.png",document.getElementById("resultImageSection").appendChild(n)}))})).finally((function(){e.updateProgress(function(e){return{ko:"\uc774\ubbf8\uc9c0 \ud45c\uc2dc\uc911...",jp:"\u30a4\u30e1\u30fc\u30b8\u30ed\u30fc\u30c9\u4e2d...",en:"Displaying image...",step:5+e}}(e.state.imageURLs.length))}))})).catch((function(t){e.updateProgress({ko:"\uc8fc\uc5b4\uc9c4 url\uc5d0\uc11c \uc774\ubbf8\uc9c0\ub97c \ubc1c\uacac\ud560\uc218 \uc5c6\uc5c7\uc2b5\ub2c8\ub2e4.",jp:"url\u304b\u3089\u30a4\u30e1\u30fc\u30b8\u3092\u767a\u898b\u3067\u304d\u307e\u305b\u3093\u3067\u3057\u305f\u3002",en:"Image not found from given url...",step:-1})}))):e.updateProgress({ko:"\uc8fc\uc5b4\uc9c4 url\uc5d0\uc11c \uc774\ubbf8\uc9c0\ub97c \ubc1c\uacac\ud560\uc218 \uc5c6\uc5c7\uc2b5\ub2c8\ub2e4.",jp:"url\u304b\u3089\u30a4\u30e1\u30fc\u30b8\u3092\u767a\u898b\u3067\u304d\u307e\u305b\u3093\u3067\u3057\u305f\u3002",en:"Image not found from given url...",step:-1})})).catch((function(t){e.updateProgress({ko:"\uc815\ud655\ud55c url\uc744 \uc785\ub825\ud574\uc8fc\uc138\uc694.",jp:"\u6b63\u3057\u3044url\u3092\u5165\u529b\u3057\u3066\u304f\u3060\u3055\u3044\u3002",en:"Please enter a correct url.",step:-1})}))):e.updateProgress({ko:"\uc815\ud655\ud55c url\uc744 \uc785\ub825\ud574\uc8fc\uc138\uc694.",jp:"\u6b63\u3057\u3044url\u3092\u5165\u529b\u3057\u3066\u304f\u3060\u3055\u3044\u3002",en:"Please enter a correct url.",step:-1})},e.fetchImages=Object(k.a)(w.a.mark((function t(){var n,a,r,s,i,o,c;return w.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(e.state.imageURLs.length===e.state.imagesMeta.length){t.next=3;break}return e.updateProgress(d),t.abrupt("return");case 3:e.updateProgress({ko:"\ubc30\uacbd \uc774\ubbf8\uc9c0 \uc900\ube44\uc911...",jp:"\u30d0\u30c3\u30af\u30b0\u30e9\u30a6\u30f3\u30c9\u30a4\u30e1\u30fc\u30b8\u4f5c\u6210\u4e2d...",en:"Preparing background image...",step:3}),n=A(e.state.imagesMeta),(a=document.createElement("CANVAS")).width=n[0],a.height=n[1],(r=a.getContext("2d")).fillStyle=e.state.imageBackgroundColor,r.fillRect(0,0,a.width,a.height),s=0,i=[{src:a.toDataURL(),x:0,y:0}],o=0;case 14:if(!(e.state.imageURLs.length>o)){t.next=24;break}return e.updateProgress((l=o+1,u=e.state.imageURLs.length,{ko:"url \uc5d0\uc11c \uc774\ubbf8\uc9c0 \ub2e4\uc6b4\ub85c\ub4dc\uc911...("+l+"/"+u+")",jp:"url\u304b\u3089\u30a4\u30e1\u30fc\u30b8\u30c0\u30a6\u30f3\u30ed\u30fc\u30c9\u4e2d...("+l+"/"+u+")",en:"Getting image from url...("+l+"/"+u+")",step:3+l})),t.next=18,M(e.state.imageURLs[o]);case 18:c=t.sent,i.push({src:c,x:0,y:s}),s+=e.state.imagesMeta[o][1];case 21:o++,t.next=14;break;case 24:return t.abrupt("return",i);case 25:case"end":return t.stop()}var l,u}),t)}))),e.state={targetURL:"",imageURLs:[],imagesMeta:[],imageBackgroundColor:"white",progress:[0,"",0]},e}return Object(l.a)(n,[{key:"render",value:function(){return r.a.createElement("div",null,r.a.createElement(O,{adrf:this.gotURL,merge:this.merge,progress:this.state.progress,lan:this.props.lan}),r.a.createElement("div",{id:"resultImageSection"}))}}]),n}(r.a.Component);n(95);var z=function(){var e=r.a.useState("en"),t=Object(o.a)(e,2),n=t[0],a=t[1];return r.a.createElement("div",{className:"App"},r.a.createElement(v,{setLan:function(e){a(e)},lan:n}),r.a.createElement(T,{className:"main-content",lan:n}),r.a.createElement(g,null))},J=Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));function _(e,t){navigator.serviceWorker.register(e).then((function(e){e.onupdatefound=function(){var n=e.installing;null!=n&&(n.onstatechange=function(){"installed"===n.state&&(navigator.serviceWorker.controller?(console.log("New content is available and will be used when all tabs for this page are closed. See https://bit.ly/CRA-PWA."),t&&t.onUpdate&&t.onUpdate(e)):(console.log("Content is cached for offline use."),t&&t.onSuccess&&t.onSuccess(e)))})}})).catch((function(e){console.error("Error during service worker registration:",e)}))}document.title="Image Merger",i.a.render(r.a.createElement(z,null),document.getElementById("root")),function(e){if("serviceWorker"in navigator){if(new URL("/react-image-merge-from-url",window.location.href).origin!==window.location.origin)return;window.addEventListener("load",(function(){var t="".concat("/react-image-merge-from-url","/service-worker.js");J?(!function(e,t){fetch(e,{headers:{"Service-Worker":"script"}}).then((function(n){var a=n.headers.get("content-type");404===n.status||null!=a&&-1===a.indexOf("javascript")?navigator.serviceWorker.ready.then((function(e){e.unregister().then((function(){window.location.reload()}))})):_(e,t)})).catch((function(){console.log("No internet connection found. App is running in offline mode.")}))}(t,e),navigator.serviceWorker.ready.then((function(){console.log("This web app is being served cache-first by a service worker. To learn more, visit https://bit.ly/CRA-PWA")}))):_(t,e)}))}}()}},[[64,1,2]]]);
//# sourceMappingURL=main.fa79aae0.chunk.js.map